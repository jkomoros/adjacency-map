import * as fs from "fs";
import * as path from "path";

const DYNAMIC_TYPES_FILE = 'src/types-dynamic.GENERATED.ts';
const DATA_DIRECTORY = 'data';

const generateConfig = () => {
	const datafiles = [];
	for (const file of fs.readdirSync(DATA_DIRECTORY)) {
		const filename = path.basename(file, '.json');
		datafiles.push(filename);
	}
	const data =`//This file was generated by 'npm run generate:config'

//All of these exports are also re-exported from src/types.ts, so you should import them from there.

export const KNOWN_DATA_FILES = ${JSON.stringify(datafiles, null, '\t').split('"').join("'")};`;

	fs.writeFileSync(DYNAMIC_TYPES_FILE, data);
};

(async() => {
	generateConfig();
})();

